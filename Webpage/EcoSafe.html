<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EcoSafe</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#F5F7F5;
      --card:#FFFFFF;
      --text:#1f2937;
      --muted:#6b7280;
      --line:#e5e7eb;
      --green:#2E7D32;
      --green2:#66BB6A;
      --shadow: 0 10px 25px rgba(0,0,0,.07);
      --radius:16px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background: radial-gradient(1200px 600px at 15% -10%, rgba(102,187,106,.20), transparent 60%),
                  radial-gradient(900px 500px at 90% 0%, rgba(46,125,50,.14), transparent 55%),
                  var(--bg);
      color:var(--text);
    }

    /* Topbar */
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: rgba(255,255,255,.75);
      border-bottom:1px solid rgba(229,231,235,.75);
    }
    .topbar{
      max-width:1100px;
      margin:0 auto;
      padding:14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800; letter-spacing:-.2px;
    }
    .leaf{
      width:34px; height:34px; border-radius:10px;
      display:grid; place-items:center;
      background: rgba(46,125,50,.12);
      border:1px solid rgba(46,125,50,.18);
      color:var(--green);
      font-size:18px;
    }
    nav a{
      color:var(--muted);
      text-decoration:none;
      font-weight:600;
      margin-left:16px;
    }
    nav a:hover{color:var(--text)}
    .pill{
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(46,125,50,.20);
      background: rgba(46,125,50,.08);
      color:var(--green);
      font-weight:700;
    }

    /* Layout */
    .wrap{max-width:1100px;margin:22px auto;padding:0 16px;display:grid;gap:16px;}
    .hero{
      border:1px solid rgba(229,231,235,.8);
      background: rgba(255,255,255,.75);
      border-radius:24px;
      padding:24px;
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero::after{
      content:"";
      position:absolute; inset:-80px -80px auto auto;
      width:220px; height:220px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(102,187,106,.45), transparent 60%);
      filter: blur(0px);
      pointer-events:none;
    }
    .hero h1{
      margin:0;
      font-size:40px;
      letter-spacing:-1px;
      line-height:1.05;
    }
    .hero h1 span{color:var(--green)}
    .hero p{margin:10px 0 0;color:var(--muted);font-weight:600}
    .stepper{
      margin-top:18px;
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      color:var(--muted); font-weight:700;
    }
    .step{
      display:flex; align-items:center; gap:8px;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(229,231,235,.9);
      background: rgba(255,255,255,.6);
    }
    .badge{
      width:22px;height:22px;border-radius:999px;
      display:grid; place-items:center;
      background: rgba(46,125,50,.12);
      border:1px solid rgba(46,125,50,.22);
      color:var(--green);
      font-size:12px;
    }

    .grid{
      display:grid;
      grid-template-columns: 430px 1fr;
      gap:16px;
      align-items:start;
    }

    .card{
      background: rgba(255,255,255,.9);
      border:1px solid rgba(229,231,235,.85);
      border-radius: var(--radius);
      padding:18px;
      box-shadow: var(--shadow);
    }

    .card h2{margin:0 0 10px;font-size:18px;letter-spacing:-.3px}
    .sub{color:var(--muted);font-weight:600;font-size:13px;margin-top:6px}

    label{display:block;color:var(--muted);font-weight:700;font-size:12px;margin:10px 0 6px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    input{
      width:100%;
      height:44px;
      padding:0 12px;
      border-radius:12px;
      border:1px solid rgba(229,231,235,.95);
      outline:none;
      font-weight:600;
      background:#fff;
    }
    input:focus{border-color: rgba(46,125,50,.5); box-shadow: 0 0 0 4px rgba(46,125,50,.10);}

    .modes{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .chip{
      display:flex;align-items:center;gap:8px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(229,231,235,.95);
      background:#fff;
      font-weight:700;
      cursor:pointer;
      user-select:none;
    }
    .chip input{display:none}
    .chip .ico{font-size:16px}
    .chip.active{
      border-color: rgba(46,125,50,.35);
      background: rgba(46,125,50,.08);
      color: var(--green);
    }

    .btn{
      width:100%;
      height:46px;
      border:none;
      border-radius:14px;
      background: linear-gradient(135deg, var(--green), #1f6a28);
      color:#fff;
      font-weight:800;
      font-size:14px;
      cursor:pointer;
      margin-top:14px;
    }
    .btn:disabled{opacity:.7;cursor:not-allowed}

    /* Results cards */
    .cards{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:12px;
      margin-top:10px;
    }
    .modeCard{
      border-radius:16px;
      border:1px solid rgba(229,231,235,.95);
      background:#fff;
      padding:14px;
      min-height:155px;
      position:relative;
      overflow:hidden;
    }
    .modeCard.highlight{
      border-color: rgba(46,125,50,.35);
      box-shadow: 0 12px 30px rgba(46,125,50,.10);
    }
    .modeTop{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .modeName{font-weight:900;letter-spacing:-.3px}
    .pillMini{
      padding:6px 10px;border-radius:999px;
      background: rgba(46,125,50,.08);
      border:1px solid rgba(46,125,50,.18);
      color: var(--green);
      font-weight:800;
      font-size:12px;
    }
    .kpi{display:flex;justify-content:space-between;color:var(--muted);font-weight:700;margin-top:10px;font-size:13px}
    .kpi span:last-child{color:var(--text)}
    .divider{height:1px;background:rgba(229,231,235,.9);margin:12px 0}

    /* Chart */
    .chartWrap{height:260px}

    /* Impact */
    .impactGrid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
      align-items:center;
    }
    .impactBox{
      border-radius:16px;
      border:1px solid rgba(229,231,235,.95);
      background:#fff;
      padding:14px;
    }
    .impactRow{
      display:flex;justify-content:space-between;align-items:center;
      padding:10px 0;
      border-bottom:1px dashed rgba(229,231,235,.95);
      font-weight:700;
      color:var(--muted);
    }
    .impactRow:last-child{border-bottom:none}
    .impactRow b{color:var(--text)}
    .rec{
      margin-top:12px;
      padding:12px;
      border-radius:14px;
      background: rgba(46,125,50,.06);
      border:1px solid rgba(46,125,50,.14);
      font-weight:800;
      color: var(--green);
    }

    /* Score ring */
    .ring{
      width:170px;height:170px;border-radius:50%;
      background: conic-gradient(var(--green) 0deg, var(--green) 0deg, #E5E7EB 0deg);
      display:grid;place-items:center;
      margin:0 auto;
      position:relative;
    }
    .ring::after{
      content:"";
      width:125px;height:125px;border-radius:50%;
      background:#fff;
      border:1px solid rgba(229,231,235,.95);
      position:absolute;
    }
    .ringContent{
      position:relative;
      z-index:2;
      text-align:center;
      font-weight:900;
    }
    .ringContent .small{font-size:12px;color:var(--muted);font-weight:800}
    .ringContent .big{font-size:34px;letter-spacing:-.8px;color:var(--text)}
    .ringContent .outof{font-size:12px;color:var(--muted);font-weight:800}

    /* Responsive */
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
      .cards{grid-template-columns:1fr 1fr}
      .impactGrid{grid-template-columns:1fr}
    }
  </style>
</head>

<body>
<header>
  <div class="topbar">
    <div class="brand">
      <div class="leaf">üçÉ</div>
      <div>EcoSafe</div>
      <div class="pill">Core29</div>
    </div>
    <nav>
      <a href="#plan">Plan</a>
      <a href="#results">Results</a>
      <a href="#impact">Impact</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <!-- HERO -->
  <section class="hero">
    <h1>Make your travel <span>eco-safe</span></h1>
    <p>Compare. Save. Impact.</p>

    <div class="stepper">
      <div class="step"><div class="badge">1</div> Input</div>
      <div class="step"><div class="badge">2</div> Compare</div>
      <div class="step"><div class="badge">3</div> Impact</div>
    </div>
  </section>

  <section class="grid" id="plan">
    <!-- INPUT CARD -->
    <div class="card">
      <h2>Plan your journey</h2>
      <div class="sub">Enter a distance for now (backend can replace this later).</div>

      <label for="distance">Distance (km)</label>
      <input id="distance" type="number" min="0" step="0.1" placeholder="e.g. 5" />

      <label>Transport options</label>
      <div class="modes" id="modes">
        <label class="chip active"><input type="checkbox" value="car" checked><span class="ico">üöó</span>Car</label>
        <label class="chip active"><input type="checkbox" value="bus" checked><span class="ico">üöå</span>Bus</label>
        <label class="chip active"><input type="checkbox" value="bike" checked><span class="ico">üö¥</span>Bike</label>
        <label class="chip active"><input type="checkbox" value="walk" checked><span class="ico">üö∂</span>Walk</label>
      </div>

      <button class="btn" id="compareBtn">Compare options</button>

      <div class="sub" style="margin-top:10px;">
        Tip: For demo, use 5km and show ‚ÄúBike vs Car‚Äù impact.
      </div>
    </div>

    <!-- RESULTS PREVIEW -->
    <div class="card" id="results">
      <h2>Results</h2>
      <div class="sub">Side-by-side comparison vs driving.</div>

      <div class="cards" id="cards"></div>

      <div class="divider"></div>

      <h2 style="margin:0 0 8px;">CO‚ÇÇ Comparison</h2>
      <div class="sub">Lower is better.</div>
      <div class="chartWrap">
        <canvas id="co2Chart"></canvas>
      </div>
    </div>
  </section>

  <!-- IMPACT -->
  <section class="card" id="impact">
    <h2>Your impact</h2>
    <div class="sub">Make sustainability visible and easy to understand.</div>

    <div class="impactGrid" style="margin-top:12px;">
      <div class="impactBox">
        <div class="impactRow"><span>CO‚ÇÇ saved vs car</span> <b><span id="savedCo2">‚Äî</span> kg</b></div>
        <div class="impactRow"><span>Equivalent trees</span> <b><span id="treesEq">‚Äî</span></b></div>
        <div class="impactRow"><span>Calories burned</span> <b><span id="burnedCals">‚Äî</span> kcal</b></div>
        <div class="rec"><span id="rec">Recommendation will appear here.</span></div>
      </div>

      <div>
        <div class="ring" id="ring">
          <div class="ringContent">
            <div class="small">Score</div>
            <div class="big" id="score">‚Äî</div>
            <div class="outof">/100</div>
          </div>
        </div>
        <div class="sub" style="text-align:center;margin-top:10px;">
          Higher score = lower CO‚ÇÇ + healthier choice
        </div>
      </div>
    </div>
  </section>
</main>

<script>
  // --- UI chips toggle ---
  const chips = document.querySelectorAll(".chip");
  chips.forEach(chip => {
    chip.addEventListener("click", (e) => {
      // allow clicking anywhere on label
      const cb = chip.querySelector("input");
      cb.checked = !cb.checked;
      chip.classList.toggle("active", cb.checked);
      e.preventDefault();
    });
  });

  const compareBtn = document.getElementById("compareBtn");
  const cardsEl = document.getElementById("cards");
  const savedCo2El = document.getElementById("savedCo2");
  const treesEqEl = document.getElementById("treesEq");
  const burnedCalsEl = document.getElementById("burnedCals");
  const scoreEl = document.getElementById("score");
  const recEl = document.getElementById("rec");
  const ringEl = document.getElementById("ring");

  let chart;

  // Demo factors (fine for hackathon; you can replace with real later)
  const SPEED = { car: 40, bus: 30, bike: 15, walk: 5 };          // km/h
  const CO2 =   { car: 0.12, bus: 0.08, bike: 0.00, walk: 0.00 }; // kg per km
  const KCAL =  { car: 0,    bus: 0,    bike: 30,   walk: 50 };   // kcal per km

  const LABEL = { car:"Car", bus:"Bus", bike:"Bike", walk:"Walk" };
  const EMOJI = { car:"üöó",  bus:"üöå",  bike:"üö¥",  walk:"üö∂" };

  function selectedModes(){
    return [...document.querySelectorAll(".chip input:checked")].map(x => x.value);
  }

  function calc(distanceKm, mode){
    const timeMin = (distanceKm / SPEED[mode]) * 60;
    const co2Kg = distanceKm * CO2[mode];
    const kcal = distanceKm * KCAL[mode];
    return {
      mode,
      distanceKm: +distanceKm.toFixed(1),
      timeMin: Math.round(timeMin),
      co2Kg: +co2Kg.toFixed(1),
      kcal: Math.round(kcal)
    };
  }

  function renderCards(results){
    // highlight the best (lowest CO2; if tie, highest kcal)
    const best = results.reduce((a,b)=>{
      if (b.co2Kg < a.co2Kg) return b;
      if (b.co2Kg === a.co2Kg && b.kcal > a.kcal) return b;
      return a;
    }, results[0]);

    cardsEl.innerHTML = results.map(r => `
      <div class="modeCard ${r.mode===best.mode ? "highlight":""}">
        <div class="modeTop">
          <div class="modeName">${EMOJI[r.mode]} ${LABEL[r.mode]}</div>
          ${r.mode===best.mode ? `<div class="pillMini">Best</div>` : ``}
        </div>
        <div class="kpi"><span>Time</span><span>${r.timeMin} min</span></div>
        <div class="kpi"><span>CO‚ÇÇ</span><span>${r.co2Kg} kg</span></div>
        <div class="kpi"><span>Calories</span><span>${r.kcal} kcal</span></div>
      </div>
    `).join("");
  }

  function renderChart(results){
    const labels = results.map(r => LABEL[r.mode]);
    const data = results.map(r => r.co2Kg);

    if(chart) chart.destroy();
    chart = new Chart(document.getElementById("co2Chart"), {
      type:"bar",
      data:{
        labels,
        datasets:[{ label:"CO‚ÇÇ (kg)", data }]
      },
      options:{
        responsive:true,
        maintainAspectRatio:false,
        plugins:{ legend:{ display:false }},
        scales:{ y:{ beginAtZero:true } }
      }
    });
  }

  function setRing(score){
    // score 0-100 => degrees
    const deg = Math.max(0, Math.min(100, score)) * 3.6;
    ringEl.style.background = `conic-gradient(var(--green) 0deg ${deg}deg, #E5E7EB ${deg}deg 360deg)`;
    scoreEl.textContent = score;
  }

  function renderImpact(results){
    const car = results.find(r => r.mode==="car");
    const bestAlt = results.reduce((a,b)=> (b.co2Kg < a.co2Kg ? b : a), results[0]);

    const saved = car ? Math.max(0, car.co2Kg - bestAlt.co2Kg) : 0;

    // tree equivalence: simple friendly demo conversion
    const trees = saved > 0 ? Math.max(1, Math.round(saved / 2)) : 0;

    const totalKcal = results.reduce((sum,r)=> sum + r.kcal, 0);

    // score: lower average CO2 = higher
    const avg = results.reduce((s,r)=> s + r.co2Kg, 0) / results.length;
    const score = Math.max(0, Math.min(100, Math.round(100 - avg * 18)));

    savedCo2El.textContent = saved.toFixed(1);
    treesEqEl.textContent = trees ? `${trees} trees` : "‚Äî";
    burnedCalsEl.textContent = totalKcal;
    setRing(score);

    if(bestAlt.mode !== "car"){
      recEl.textContent = `Choose ${LABEL[bestAlt.mode]} for this route to reduce CO‚ÇÇ and improve health.`;
    } else {
      recEl.textContent = `Try Bus/Bike/Walk where possible to reduce CO‚ÇÇ.`;
    }
  }

  compareBtn.addEventListener("click", () => {
    const distanceKm = parseFloat(document.getElementById("distance").value);
    const modes = selectedModes();

    if(!distanceKm || distanceKm <= 0){
      alert("Please enter a distance in km (e.g. 5).");
      return;
    }
    if(modes.length === 0){
      alert("Select at least one transport option.");
      return;
    }

    // Mock results (swap this later with your backend response)
    const results = modes.map(m => calc(distanceKm, m));

    renderCards(results);
    renderChart(results);
    renderImpact(results);

    // smooth scroll to results on small screens
    document.getElementById("results").scrollIntoView({ behavior:"smooth" });
  });

  // initial demo state
  document.getElementById("distance").value = 5;
  compareBtn.click();
</script>
</body>
</html>